<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roleta - Eureka do Padre</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/roleta.css') }}">
</head>
<body style="overflow:hidden;">
    <div class="roleta-layout">
        <!-- Placar √† esquerda -->
        <aside class="placar-col">
            <div class="placar-header">
                <h2>üèÜ Placar</h2>
                <div id="placar" class="placar-grid"></div>
            </div>
        </aside>
        <!-- Roleta central -->
        <main class="roleta-col">
            <div class="folha">
                <div class="seta"></div>
                <div class="roleta" id="roleta">
                    <div class="box1"></div>
                    <div class="box2"></div>
                    <div class="box3"></div>
                    <div class="box4"></div>
                    <div class="box5"></div>
                    <div class="box6"></div>
                    <div class="box7"></div>
                    <div class="box8"></div>
                    <!-- Disciplinas -->
                    <div class="premio premio1" id="opt1">Matem√°tica</div>
                    <div class="premio premio2" id="opt0">Portugu√™s</div>
                    <div class="premio premio3" id="opt7">Hist√≥ria</div>
                    <div class="premio premio4" id="opt6">Geografia</div>
                    <div class="premio premio5" id="opt5">Ci√™ncias</div>
                    <div class="premio premio6" id="opt4">Ingl√™s</div>
                    <div class="premio premio7" id="opt3">Arte</div>
                    <div class="premio premio8" id="opt2">Educa√ß√£o F√≠sica</div>
                    <div id="btnPlay" class="btnRoleta play" onclick="playOnClick()">‚ñ∫</div>
                    <div id="btnStop" class="btnRoleta stop" onclick="stopOnClick()">‚ùö‚ùö</div>
                </div>
            </div>
        </main>
        <!-- Tema sorteado √† direita -->
        <aside class="tema-col">
            <div class="tema-sorteado-box">
                <h2>Tema Sorteado</h2>
                <div id="tema-sorteado" class="tema-sorteado">Nenhum</div>
                <button id="btnIrPergunta" class="btn-primary" style="margin-top: 24px;" disabled>IR PARA PERGUNTA</button>
            </div>
        </aside>
    </div>
    <script>
    let globalObjects;
    function playOnClick() {
        globalObjects = {
            btnPlay: document.getElementById("btnPlay"),
            roleta: document.getElementById("roleta"),
            btnStop: document.getElementById("btnStop"),
        };
        globalObjects.timeInitial = new Date();
        globalObjects.btnPlay.style.visibility = "hidden";
        globalObjects.btnStop.style.visibility = "visible";
        document.getElementById("btnIrPergunta").disabled = true;
        document.getElementById("tema-sorteado").innerHTML = 'Nenhum';
        const randomRotation = Math.floor(Math.random() * 3600) + 360;
        globalObjects.roleta.style.transition = "transform 4s ease-out";
        globalObjects.roleta.style.transform = `rotate(${randomRotation}deg)`;
    }
    function stopOnClick() {
        globalObjects.btnStop.style.visibility = "hidden";
        const transformValue = globalObjects.roleta.style.transform;
        const rotationDegrees = parseInt(transformValue.replace(/[^0-9]/g, '')) % 360;
        const sections = 8;
        const sectionDegree = 360 / sections;
        const winningSection = Math.floor(rotationDegrees / sectionDegree);
        const boxGanhador = document.getElementById("opt".concat(winningSection));
        document.getElementById("tema-sorteado").innerHTML = boxGanhador.innerHTML;
        document.getElementById("btnIrPergunta").disabled = false;
        globalObjects.btnPlay.style.visibility = "visible";
    }
    // Exemplo de placar din√¢mico (substitua por integra√ß√£o real)
    function atualizarPlacar(equipes) {
        const placarDiv = document.getElementById('placar');
        placarDiv.innerHTML = '';
        equipes.forEach(eq => {
            const el = document.createElement('div');
            el.className = 'equipe-placar';
            el.innerHTML = `<span class='equipe-nome'>${eq.nome}</span><span class='equipe-pontos'>${eq.pontos}</span>`;
            placarDiv.appendChild(el);
        });
    }
    // Exemplo inicial
    atualizarPlacar([
        {nome: 'Equipe Azul', pontos: 0},
        {nome: 'Equipe Laranja', pontos: 0}
    ]);
    </script>
</body>
</html>
